<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">Shell</a>
              <a href="#" data-language-name="javascript">Node</a>
        </div>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to Authentimate&rsquo;s API! You can use this API to access all of our API endpoints, such as <a href="#verify-api">Verify API</a> to verify your users&rsquo; phones.</p>

<p>The API is organized around <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>. All requests should be made over SSL. All request and response bodies, including errors, are encoded in JSON.</p>

<h1 id="authentication">Authentication</h1>
<pre class="highlight shell"><code><span class="c">#Authentication using HTTP basic auth.</span>

curl <span class="s2">"api_endpoint_here"</span>
    -u YOUR_SECRET_KEY:
</code></pre><pre class="highlight shell"><code><span class="c">#Alternatively pass a Bearer token in an Authorization header.</span>

curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: Bearer YOUR_SECRET_KEY"</span>
</code></pre>
<p>Authentication is done via your accountâ€™s API key which is found in the <a href="https://dashboard.authentimate.com/keys">dashboard</a>.</p>

<p>Requests are authenticated using <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic Auth</a>. Provide your API key as the basic auth username. You do not need to provide a password.</p>

<p>Alternatively you can also pass your API key as a bearer token in an <code class="prettyprint">Authorization</code> header.</p>

<h1 id="errors">Errors</h1>

<p>The Authentimate API uses the following error codes:</p>

<table><thead>
<tr>
<th>Code</th>
<th>Title</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>The request was successful.</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>The resource was successfully created.</td>
</tr>
<tr>
<td>202</td>
<td>Async created</td>
<td>The resource was asynchronously created</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
<td>Bad request</td>
</tr>
<tr>
<td>422</td>
<td>Validation error</td>
<td>A validation error occurred.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Your API key is invalid.</td>
</tr>
<tr>
<td>404</td>
<td>Not found</td>
<td>The resource does not exist.</td>
</tr>
<tr>
<td>50X</td>
<td>Internal Server Error</td>
<td>An error occurred with our API.</td>
</tr>
</tbody></table>

<h1 id="verify-api">Verify API</h1>

<p>The Verify API lets you send a verification code to a user&rsquo;s phone number to verify that they own the phone number.</p>

<h2 id="create-verification-request">Create Verification Request</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.authentimate.com/v1/verifications"</span>
    -u YOUR_SECRET_KEY:
    -d <span class="s1">'{"phoneNumber":"16072039850"}'</span>
</code></pre><pre class="highlight javascript"><code><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">request</span>
</code></pre><pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
    <span class="s1">'https://api.authentimate.com/v1/verifications'</span><span class="p">,</span>
    <span class="p">{</span> 
        <span class="na">form</span><span class="p">:</span> <span class="p">{</span> <span class="na">phoneNumber</span><span class="p">:</span> <span class="s1">'16072039850'</span> <span class="p">},</span>
        <span class="na">auth</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'YOUR_SECRET_KEY'</span> <span class="p">},</span>
        <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> 
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">==</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Save body.id to the user's profile in your database so you can find this user later to check the code they enter</span>
            <span class="c1">// Optionally store body.expires as well if you'd like to reject expired verification codes without sending a request to Authentimate</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<blockquote>
<p>The API response object looks like the following. 
You should store the <code class="prettyprint">id</code> property with the user in your database. You&rsquo;ll need to send it along when you check the user&rsquo;s verification code
The <code class="prettyprint">expires</code> property is the Unix timestamp of the expiry date. We handle the actual rejecting of expired verification requests, the expiry date is provided for your convenience in clearing out expired tokens from your database or for rejecting verification checks without needing to send a request to Authentimate.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ver_7b19ddcc6402fd0cd28ade60246ca60c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires"</span><span class="p">:</span><span class="w"> </span><span class="mi">1487207640</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To verify a user&rsquo;s phone number, you create a Verification object. This will send a verification code to the user&rsquo;s phone with a code they can enter on your website to prove that they own the phone number. After they&rsquo;ve done this, you&rsquo;ll need to send us a request with the code they entered as well as the <code class="prettyprint">id</code> from the API response to verify that the code is correct.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.authentimate.com/v1/verifications</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>phoneNumber</td>
<td><strong>string (required)<strong></td>
<td>The phone number that the verification code will be sent to. NOTE: This phone number must include the country code, or we will not be able to deliver the message.</td>
</tr>
</tbody></table>

<h2 id="check-verification-code">Check Verification Code</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.authentimate.com/v1/verifications/check?id=ver_7b19ddcc6402fd0cd28ade60246ca60c&amp;code=928571
    -u YOUR_SECRET_KEY:
</span></code></pre><pre class="highlight javascript"><code><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">request</span>
</code></pre><pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span>
    <span class="s1">'https://api.authentimate.com/v1/verifications/check?id=ver_7b19ddcc6402fd0cd28ade60246ca60c&amp;code=928571'</span><span class="p">,</span>
    <span class="p">{</span> 
        <span class="na">auth</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'YOUR_SECRET_KEY'</span> <span class="p">},</span>
        <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> 
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">==</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Check body.verified for the status</span>
            <span class="c1">// body.verified will be true if the code was correct, and false if the code was incorrect.</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<blockquote>
<p>The API response object looks like the following. 
You should check the <code class="prettyprint">verified</code> property in the response body to determine whether the code the user entered was correct or not. A correct code will return <code class="prettyprint">verified: true</code>, while an incorrect code will return <code class="prettyprint">verified: false</code>.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>After you create a verification request for a user, you&rsquo;ll need to prompt them to enter the code that we sent to their phone. In order to verify that this code is correct, you send it to Authentimate&rsquo;s API along with the <code class="prettyprint">id</code> returned in the API response.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.authentimate.com/v1/verifications/check</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong>string (required)<strong></td>
<td>The identifier returned in the <code class="prettyprint">id</code> property in the Create Verification Request endpoint</td>
</tr>
<tr>
<td>code</td>
<td><strong>string (required)<strong></td>
<td>The code that your user entered after you generated a Verification request for their phone number.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">Shell</a>
                <a href="#" data-language-name="javascript">Node</a>
          </div>
      </div>
    </div>
  </body>
</html>
