<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;,&quot;python&quot;,&quot;ruby&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">Shell</a>
              <a href="#" data-language-name="javascript">Node</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="ruby">Ruby</a>
        </div>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to Authentimate&rsquo;s API! You can use this API to access all of our API endpoints, such as <a href="#recover-api">Recover API</a> to reset passwords for your users.</p>

<p>The API is organized around <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>. All requests should be made over SSL. All request and response bodies, including errors, are encoded in JSON.</p>

<h1 id="authentication">Authentication</h1>
<pre class="highlight shell"><code><span class="c">#Authentication using HTTP basic auth.</span>

curl <span class="s2">"api_endpoint_here"</span>
    -u YOUR_SECRET_KEY:
</code></pre><pre class="highlight shell"><code><span class="c">#Alternatively pass a Bearer token in an Authorization header.</span>

curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: Bearer YOUR_SECRET_KEY"</span>
</code></pre>
<p>Authentication is done via your accountâ€™s API key which is found in the <a href="https://app.authentimate.com/keys">dashboard</a>.</p>

<p>Requests are authenticated using <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic Auth</a>. Provide your API key as the basic auth username. You do not need to provide a password.</p>

<p>Alternatively you can also pass your API key as a bearer token in an <code class="prettyprint">Authorization</code> header.</p>

<h1 id="errors">Errors</h1>

<p>The Authentimate API uses the following error codes:</p>

<table><thead>
<tr>
<th>Code</th>
<th>Title</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>The request was successful.</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>The resource was successfully created.</td>
</tr>
<tr>
<td>202</td>
<td>Async created</td>
<td>The resource was asynchronously created</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
<td>Bad request</td>
</tr>
<tr>
<td>422</td>
<td>Validation error</td>
<td>A validation error occurred.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Your API key is invalid.</td>
</tr>
<tr>
<td>404</td>
<td>Not found</td>
<td>The resource does not exist.</td>
</tr>
<tr>
<td>50X</td>
<td>Internal Server Error</td>
<td>An error occurred with our API.</td>
</tr>
</tbody></table>

<h1 id="webhooks">Webhooks</h1>

<blockquote>
<p>Your webhook URL may look something like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="s2">"https://myserver.com/api/webhooks/authentimate"</span><span class="w">
</span></code></pre>
<p>For some APIs, such as <a href="#recover-api">Recover API</a>, the result of the user&rsquo;s action is asynchronous (since they can choose to perform the action whenever they feel like it). For these requests, we will call the webhook URL you provide to us when we receive input from the user.</p>

<p>You can set a webhook URL in your <a href="https://app.authentimate.com/project">project settings</a> to be used with all requests.</p>

<p>If you return anything other than a <code class="prettyprint">HTTP 200</code> status to the webhook POST then we will report an error to the user and they will need to submit the form again.</p>

<h1 id="recover-api">Recover API</h1>

<p>The Recover API lets you send a password reset form to a user&rsquo;s email address.</p>

<h2 id="create-reset-request">Create Reset Request</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://recover.authentimate.com/v1/resets"</span>
    -u YOUR_SECRET_KEY:
    -d <span class="s1">'{"email":"test@example.com"}'</span>
</code></pre><pre class="highlight javascript"><code><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">request</span>
</code></pre><pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
    <span class="s1">'https://recover.authentimate.com/v1/resets'</span><span class="p">,</span>
    <span class="p">{</span> 
        <span class="na">form</span><span class="p">:</span> <span class="p">{</span> <span class="na">email</span><span class="p">:</span> <span class="s1">'test@example.com'</span> <span class="p">},</span>
        <span class="na">auth</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'YOUR_SECRET_KEY'</span> <span class="p">},</span>
        <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> 
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">==</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Save body.id to the user's profile in your database</span>
            <span class="c1">// Optionally save body.expires to the user profile as well</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre><pre class="highlight python"><code><span class="n">pip</span> <span class="n">install</span> <span class="n">requests</span>
</code></pre><pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://recover.authentimate.com/v1/resets'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span> <span class="s">'email'</span><span class="p">:</span><span class="s">'test@example.com'</span> <span class="p">},</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s">'YOUR_SECRET_KEY'</span><span class="p">,</span> <span class="s">''</span><span class="p">))</span>
<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'uri'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://recover.authentimate.com/v1/resets'</span><span class="p">)</span>
<span class="n">req</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">path</span><span class="p">)</span>
<span class="n">req</span><span class="p">.</span><span class="nf">basic_auth</span> <span class="s1">'YOUR_SECRET_KEY'</span><span class="p">,</span> <span class="s1">''</span>
<span class="n">req</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">req</span><span class="p">.</span><span class="nf">form_data</span><span class="p">({</span><span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">'test@example.com'</span><span class="p">})</span>

<span class="n">resp</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">).</span><span class="nf">start</span> <span class="p">{</span><span class="o">|</span><span class="n">http</span><span class="o">|</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">req</span><span class="p">)</span> <span class="p">}</span>
<span class="nb">puts</span> <span class="n">resp</span>
</code></pre>
<blockquote>
<p>The API response object looks like the following. 
You should store the <code class="prettyprint">id</code> property with the user in your database. The result webhook will contain the same <code class="prettyprint">id</code> so that you can look up the user and update their password. 
The <code class="prettyprint">expires</code> property is the Unix timestamp of the expiry date. We handle the actual rejecting of expired password resets, the expiry date is provided for your convenience in clearing out expired tokens from your database.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b19ddcc6402fd0cd28ade60246ca60c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires"</span><span class="p">:</span><span class="w"> </span><span class="mi">1487207640</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>In order to receive the user&rsquo;s updated password, you&rsquo;ll need to provide us with an endpoint on your server where we can send the password. The webhook request body looks like the following. As you can see, the <code class="prettyprint">id</code> property in the webhook matches the <code class="prettyprint">id</code> property you receive in the API response object. You can use this identifier to look up the user and update their password.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b19ddcc6402fd0cd28ade60246ca60c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"h8A3fJ9d9L"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To reset a user&rsquo;s password, you create a Reset object. This will send an email to the user with a link they can follow to enter a new password. After they&rsquo;ve done this, we&rsquo;ll send the new password to the webhook URL that you set in your <a href="https://app.authentimate.com/project">project settings</a>.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://recover.authentimate.com/v1/resets</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td><strong>string (required)<strong></td>
<td>The email address that a password reset link will be sent to</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">Shell</a>
                <a href="#" data-language-name="javascript">Node</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="ruby">Ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
